var Ae=Object.defineProperty,Ye=Object.defineProperties;var $e=Object.getOwnPropertyDescriptors;var ye=Object.getOwnPropertySymbols;var Me=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable;var Ee=(n,e,a)=>e in n?Ae(n,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[e]=a,De=(n,e)=>{for(var a in e||(e={}))Me.call(e,a)&&Ee(n,a,e[a]);if(ye)for(var a of ye(e))Pe.call(e,a)&&Ee(n,a,e[a]);return n},be=(n,e)=>Ye(n,$e(e));import{Y as Ze,D as Te,Z as Fe,S as x,i as G,s as K,_ as Le,e as y,t as O,k as B,w as W,c as E,a as b,h as U,d as _,m as S,x as X,b as m,f as we,g as q,K as u,y as J,R as oe,$ as Re,q as L,o as j,B as Q,T as Ve,M as ie,v as ke,I as Ie,j as ue,L as ce,z as qe,A as je,n as ze,p as Ce,a0 as Be,C as xe,V as Ge,W as Ke,X as We}from"../chunks/vendor-0f7e7446.js";const Se=new Ze;Se.init("US");const Xe=Se.getHolidays(new Date().getFullYear()).map(n=>({date:new Date(n.date).toISOString(),type:"Holiday",name:n.name,image:"https://picsum.photos/100/100"})),ee=Te([]),te=Te({}),de=new Fe("myDatabase");de.version(1).stores({events:"id, date, type, name, image"});function Je(n){let e,a,r,o,i,h,c,p,l,v,s,d,t,f,g,w,D,T,H,R,A,V,$,ae,ne,F,le,se,M,P,Z,re,he;return P=new Le({props:{accept:"image/*",multiple:!1,containerStyles:`;
        padding: 0;
        height: 196px;
        width: 196px;
        background-color:var(--background-color);
        `}}),P.$on("drop",n[3]),{c(){e=y("div"),a=y("form"),r=y("div"),o=y("button"),i=O("New Event"),h=B(),c=y("input"),l=B(),v=y("input"),d=B(),t=y("input"),g=B(),w=y("datalist"),D=y("option"),T=O("Type"),H=y("option"),R=O("Holiday"),A=y("option"),V=O("Birthday"),$=y("option"),ae=O("Anniversary"),ne=B(),F=y("button"),le=O("Save"),se=B(),M=y("div"),W(P.$$.fragment),this.h()},l(I){e=E(I,"DIV",{});var N=b(e);a=E(N,"FORM",{class:!0});var Y=b(a);r=E(Y,"DIV",{class:!0});var k=b(r);o=E(k,"BUTTON",{type:!0});var z=b(o);i=U(z,"New Event"),z.forEach(_),h=S(k),c=E(k,"INPUT",{id:!0,type:!0,name:!0,class:!0}),l=S(k),v=E(k,"INPUT",{id:!0,type:!0,list:!0,class:!0}),d=S(k),t=E(k,"INPUT",{id:!0,type:!0,name:!0,placeholder:!0,class:!0}),g=S(k),w=E(k,"DATALIST",{id:!0});var C=b(w);D=E(C,"OPTION",{});var ve=b(D);T=U(ve,"Type"),ve.forEach(_),H=E(C,"OPTION",{});var me=b(H);R=U(me,"Holiday"),me.forEach(_),A=E(C,"OPTION",{});var _e=b(A);V=U(_e,"Birthday"),_e.forEach(_),$=E(C,"OPTION",{});var pe=b($);ae=U(pe,"Anniversary"),pe.forEach(_),C.forEach(_),ne=S(k),F=E(k,"BUTTON",{type:!0});var fe=b(F);le=U(fe,"Save"),fe.forEach(_),k.forEach(_),se=S(Y),M=E(Y,"DIV",{class:!0,style:!0});var ge=b(M);X(P.$$.fragment,ge),ge.forEach(_),Y.forEach(_),N.forEach(_),this.h()},h(){var I,N,Y;m(o,"type","button"),m(c,"id","event-date"),m(c,"type","date"),m(c,"name","date"),c.value=p=(N=(I=n[0].date)==null?void 0:I.slice(0,10))!=null?N:"YYYY-MM-DD",m(c,"class","svelte-18y0otl"),m(v,"id","event-type"),m(v,"type","text"),m(v,"list","types"),v.value=s=(Y=n[0].type)!=null?Y:"",m(v,"class","svelte-18y0otl"),m(t,"id","event-name"),m(t,"type","text"),m(t,"name","name"),m(t,"placeholder","Name"),t.value=f=n[0].name,m(t,"class","svelte-18y0otl"),D.__value="",D.value=D.__value,H.__value="Holiday",H.value=H.__value,A.__value="Birthday",A.value=A.__value,$.__value="Anniversary",$.value=$.__value,m(w,"id","types"),m(F,"type","button"),m(r,"class","text-input svelte-18y0otl"),m(M,"class","image-input svelte-18y0otl"),we(M,"background-image","url("+n[2]+")"),m(a,"class","svelte-18y0otl")},m(I,N){q(I,e,N),u(e,a),u(a,r),u(r,o),u(o,i),u(r,h),u(r,c),u(r,l),u(r,v),u(r,d),u(r,t),u(r,g),u(r,w),u(w,D),u(D,T),u(w,H),u(H,R),u(w,A),u(A,V),u(w,$),u($,ae),u(r,ne),u(r,F),u(F,le),u(a,se),u(a,M),J(P,M,null),Z=!0,re||(he=[oe(o,"click",function(){Re(n[1])&&n[1].apply(this,arguments)}),oe(F,"click",n[4])],re=!0)},p(I,[N]){var Y,k,z;n=I,(!Z||N&1&&p!==(p=(k=(Y=n[0].date)==null?void 0:Y.slice(0,10))!=null?k:"YYYY-MM-DD"))&&(c.value=p),(!Z||N&1&&s!==(s=(z=n[0].type)!=null?z:"")&&v.value!==s)&&(v.value=s),(!Z||N&1&&f!==(f=n[0].name)&&t.value!==f)&&(t.value=f),(!Z||N&4)&&we(M,"background-image","url("+n[2]+")")},i(I){Z||(L(P.$$.fragment,I),Z=!0)},o(I){j(P.$$.fragment,I),Z=!1},d(I){I&&_(e),Q(P),re=!1,Ve(he)}}}function Qe(n,e,a){let r,o,i;ie(n,te,l=>a(0,o=l)),ie(n,ee,l=>a(5,i=l));function h(l){const v=l.detail.acceptedFiles[0],s=new FileReader;s.onload=d=>{a(2,r=d.target.result)},s.readAsDataURL(v)}let c;ke(()=>{a(1,c=()=>{te.set({id:window.crypto.randomUUID(),date:new Date().toISOString(),type:"",name:"",image:"https://picsum.photos/100/100"})})});const p=()=>{te.set({id:o.id,date:document.getElementById("event-date").value+" 00:00:00.000",type:document.getElementById("event-type").value,name:document.getElementById("event-name").value,image:r});const l=i.findIndex(v=>v.id===o.id);ee.update(v=>(l>-1?v[l]=o:v.push(o),v.sort((s,d)=>{const t=s.date.replace(/^(\d{4})/,"2022"),f=d.date.replace(/^(\d{4})/,"2022");return new Date(t)-new Date(f)}),v)),de.events.put(o)};return n.$$.update=()=>{n.$$.dirty&1&&a(2,r=o.image)},[o,c,r,h,p]}class et extends x{constructor(e){super();G(this,e,Qe,Je,K,{})}}function tt(n){let e,a,r=new Date(n[1]).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})+"",o,i,h,c,p,l,v,s,d,t,f,g,w;return{c(){e=y("tr"),a=y("td"),o=O(r),i=B(),h=y("td"),c=O(n[2]),p=B(),l=y("td"),v=O(n[3]),s=B(),d=y("td"),t=y("img"),this.h()},l(D){e=E(D,"TR",{class:!0});var T=b(e);a=E(T,"TD",{class:!0});var H=b(a);o=U(H,r),H.forEach(_),i=S(T),h=E(T,"TD",{class:!0});var R=b(h);c=U(R,n[2]),R.forEach(_),p=S(T),l=E(T,"TD",{class:!0});var A=b(l);v=U(A,n[3]),A.forEach(_),s=S(T),d=E(T,"TD",{class:!0});var V=b(d);t=E(V,"IMG",{src:!0,alt:!0,class:!0}),V.forEach(_),T.forEach(_),this.h()},h(){m(a,"class","svelte-ikn64x"),m(h,"class","svelte-ikn64x"),m(l,"class","svelte-ikn64x"),Ie(t.src,f=n[4])||m(t,"src",f),m(t,"alt",n[3]),m(t,"class","svelte-ikn64x"),m(d,"class","svelte-ikn64x"),m(e,"class","svelte-ikn64x")},m(D,T){q(D,e,T),u(e,a),u(a,o),u(e,i),u(e,h),u(h,c),u(e,p),u(e,l),u(l,v),u(e,s),u(e,d),u(d,t),g||(w=oe(e,"click",n[5]),g=!0)},p(D,[T]){T&2&&r!==(r=new Date(D[1]).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})+"")&&ue(o,r),T&4&&ue(c,D[2]),T&8&&ue(v,D[3]),T&16&&!Ie(t.src,f=D[4])&&m(t,"src",f),T&8&&m(t,"alt",D[3])},i:ce,o:ce,d(D){D&&_(e),g=!1,w()}}}function at(n,e,a){let{id:r}=e,{date:o}=e,{type:i}=e,{name:h}=e,{image:c}=e;const p=()=>te.set({id:r,date:o,type:i,name:h,image:c});return n.$$set=l=>{"id"in l&&a(0,r=l.id),"date"in l&&a(1,o=l.date),"type"in l&&a(2,i=l.type),"name"in l&&a(3,h=l.name),"image"in l&&a(4,c=l.image)},[r,o,i,h,c,p]}class nt extends x{constructor(e){super();G(this,e,at,tt,K,{id:0,date:1,type:2,name:3,image:4})}}function Ne(n,e,a){const r=n.slice();return r[2]=e[a],r}function Oe(n,e,a){const r=n.slice();return r[5]=e[a],r}function Ue(n){let e,a=n[5]+"",r;return{c(){e=y("th"),r=O(a)},l(o){e=E(o,"TH",{});var i=b(e);r=U(i,a),i.forEach(_)},m(o,i){q(o,e,i),u(e,r)},p:ce,d(o){o&&_(e)}}}function He(n){let e,a;const r=[n[2]];let o={};for(let i=0;i<r.length;i+=1)o=xe(o,r[i]);return e=new nt({props:o}),{c(){W(e.$$.fragment)},l(i){X(e.$$.fragment,i)},m(i,h){J(e,i,h),a=!0},p(i,h){const c=h&1?qe(r,[je(i[2])]):{};e.$set(c)},i(i){a||(L(e.$$.fragment,i),a=!0)},o(i){j(e.$$.fragment,i),a=!1},d(i){Q(e,i)}}}function lt(n){let e,a,r,o,i,h=n[1],c=[];for(let s=0;s<h.length;s+=1)c[s]=Ue(Oe(n,h,s));let p=n[0],l=[];for(let s=0;s<p.length;s+=1)l[s]=He(Ne(n,p,s));const v=s=>j(l[s],1,1,()=>{l[s]=null});return{c(){e=y("table"),a=y("thead");for(let s=0;s<c.length;s+=1)c[s].c();r=B(),o=y("tbody");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=E(s,"TABLE",{class:!0});var d=b(e);a=E(d,"THEAD",{});var t=b(a);for(let g=0;g<c.length;g+=1)c[g].l(t);t.forEach(_),r=S(d),o=E(d,"TBODY",{});var f=b(o);for(let g=0;g<l.length;g+=1)l[g].l(f);f.forEach(_),d.forEach(_),this.h()},h(){m(e,"class","svelte-1w5bhrs")},m(s,d){q(s,e,d),u(e,a);for(let t=0;t<c.length;t+=1)c[t].m(a,null);u(e,r),u(e,o);for(let t=0;t<l.length;t+=1)l[t].m(o,null);i=!0},p(s,[d]){if(d&2){h=s[1];let t;for(t=0;t<h.length;t+=1){const f=Oe(s,h,t);c[t]?c[t].p(f,d):(c[t]=Ue(f),c[t].c(),c[t].m(a,null))}for(;t<c.length;t+=1)c[t].d(1);c.length=h.length}if(d&1){p=s[0];let t;for(t=0;t<p.length;t+=1){const f=Ne(s,p,t);l[t]?(l[t].p(f,d),L(l[t],1)):(l[t]=He(f),l[t].c(),L(l[t],1),l[t].m(o,null))}for(ze(),t=p.length;t<l.length;t+=1)v(t);Ce()}},i(s){if(!i){for(let d=0;d<p.length;d+=1)L(l[d]);i=!0}},o(s){l=l.filter(Boolean);for(let d=0;d<l.length;d+=1)j(l[d]);i=!1},d(s){s&&_(e),Be(c,s),Be(l,s)}}}function st(n,e,a){let r=["Date","Type","Name","Image"],{entries:o}=e;return n.$$set=i=>{"entries"in i&&a(0,o=i.entries)},[o,r]}class rt extends x{constructor(e){super();G(this,e,st,lt,K,{entries:0})}}function ot(n){let e,a,r,o,i,h,c,p,l,v,s,d;return h=new et({}),s=new rt({props:{entries:n[0]}}),{c(){e=B(),a=y("div"),r=y("h1"),o=O("Event Editor"),i=B(),W(h.$$.fragment),c=B(),p=y("h1"),l=O("Holidays"),v=B(),W(s.$$.fragment),this.h()},l(t){Ge('[data-svelte="svelte-kbjtp0"]',document.head).forEach(_),e=S(t),a=E(t,"DIV",{class:!0});var g=b(a);r=E(g,"H1",{});var w=b(r);o=U(w,"Event Editor"),w.forEach(_),i=S(g),X(h.$$.fragment,g),c=S(g),p=E(g,"H1",{});var D=b(p);l=U(D,"Holidays"),D.forEach(_),v=S(g),X(s.$$.fragment,g),g.forEach(_),this.h()},h(){document.title="Data",m(a,"class","content svelte-cf77e8")},m(t,f){q(t,e,f),q(t,a,f),u(a,r),u(r,o),u(a,i),J(h,a,null),u(a,c),u(a,p),u(p,l),u(a,v),J(s,a,null),d=!0},p(t,[f]){const g={};f&1&&(g.entries=t[0]),s.$set(g)},i(t){d||(L(h.$$.fragment,t),L(s.$$.fragment,t),d=!0)},o(t){j(h.$$.fragment,t),j(s.$$.fragment,t),d=!1},d(t){t&&_(e),t&&_(a),Q(h),Q(s)}}}function it(n,e,a){let r;ie(n,ee,l=>a(0,r=l));const o=Ke,i=We;let h=Xe,c=[{date:"1960-01-02T00:00:00.000Z",type:"Birthday",name:"Dad",image:"https://picsum.photos/100/100"},{date:"1961-03-04T00:00:00.000Z",type:"Birthday",name:"Mom",image:"https://picsum.photos/100/100"},{date:"1962-05-06T00:00:00.000Z",type:"Birthday",name:"Zoey",image:"https://picsum.photos/100/100"},{date:"1963-07-08T00:00:00.000Z",type:"Birthday",name:"Frankie",image:"https://picsum.photos/100/100"}],p=[{date:"1961-09-10T00:00:00.000Z",type:"Anniversary",name:"Mom & Dad",image:"https://picsum.photos/100/100"},{date:"1910-11-12T00:00:00.000Z",type:"Anniversary",name:"Aunt & Uncle",image:"https://picsum.photos/100/100"}];return ke(()=>{let l=[...h,...c,...p].map(v=>be(De({},v),{id:window.crypto.randomUUID()}));l.sort((v,s)=>{const d=v.date.replace(/^(\d{4})/,"2022"),t=s.date.replace(/^(\d{4})/,"2022");return new Date(d)-new Date(t)}),ee.set(l),indexedDB.deleteDatabase("myDatabase"),de.events.bulkPut(l)}),[r,o,i]}class dt extends x{constructor(e){super();G(this,e,it,ot,K,{hydrate:1,router:2})}get hydrate(){return this.$$.ctx[1]}get router(){return this.$$.ctx[2]}}export{dt as default};
